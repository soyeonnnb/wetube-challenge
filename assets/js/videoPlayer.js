(()=>{const e=document.getElementById("videoContainer"),t=e.querySelector("video"),n=document.getElementById("play"),s=n.querySelector("i"),a=document.getElementById("mute"),l=a.querySelector("i"),u=document.getElementById("volume"),d=document.getElementById("currenTime"),o=document.getElementById("totalTime"),m=document.getElementById("timeline"),c=document.getElementById("fullScreen"),r=c.querySelector("i"),i=document.getElementById("videoControls");let v=null,f=null,E=.5;t.volume=E;const p=e=>new Date(1e3*e).toISOString().substr(14,5),y=()=>i.classList.remove("showing");n.addEventListener("click",(e=>{t.paused?t.play():t.pause(),s.classList=t.paused?"fas fa-play":"fas fa-pause"})),a.addEventListener("click",(e=>{t.muted?t.muted=!1:t.muted=!0,l.classList=t.muted?"fas fa-volume-mute":"fas fa-volume-up",u.value=t.muted?0:E})),u.addEventListener("input",(e=>{const{target:{value:n}}=e;t.muted&&(t.muted=!1,a.innerText="Mute"),E=n,t.volume=n})),t.addEventListener("loadeddata",(()=>{o.innerText=p(Math.floor(t.duration)),m.max=Math.floor(t.duration)})),t.addEventListener("timeupdate",(()=>{d.innerText=p(Math.floor(t.currentTime)),m.value=Math.floor(t.currentTime)})),e.addEventListener("mousemove",(()=>{v&&(clearTimeout(v),v=null),f&&(clearTimeout(f),f=null),i.classList.add("showing"),f=setTimeout(y,3e3)})),e.addEventListener("mouseleave",(()=>{v=setTimeout(y,3e3)})),m.addEventListener("input",(e=>{const{target:{value:n}}=e;t.currentTime=n})),c.addEventListener("click",(()=>{document.fullscreenElement?(document.exitFullscreen(),r.classList="fas fa-expand"):(e.requestFullscreen(),r.classList="fas fa-compress")})),t.addEventListener("ended",(()=>{const{id:t}=e.dataset;fetch(`/api/videos/${t}/view`,{method:"POST"})})),document.addEventListener("keydown",(n=>{const s=n.key;" "!==s?"f"!==s?"Escape"!==s||document.fullscreenElement&&document.exitFullscreen():document.fullscreenElement||e.requestFullscreen():t.paused?(t.play(),psBtn.className="fas fa-pause"):(t.pause(),psBtn.className="fas fa-play")}))})();
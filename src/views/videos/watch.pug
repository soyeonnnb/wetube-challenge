extends ../base
include ../mixins/comment

block content 
    div(data-id=video._id)#videoContainer
        video(src="/"+video.fileUrl controls)
    div 
        div 
            each hashtag in video.hashtags
                span ##{hashtag} 
        span=video.title    
        div 
            if video.owner.avatarUrl
                img(src="/"+video.owner.avatarUrl width="50px")
            else 
                span xxx 
            a(href=`/channel/${video.owner._id}/featured`) #{video.owner.channel}
        
        button#likeBtn(class=like?"like":"dislike")
            if like 
                | 💖
            else 
                | 🤍

        span 조회수 #{video.meta.views}회 
        span=video.createdAt
        span=video.description
    

    if loggedIn && video.owner._id == loggedInUser._id
        a(href=`/videos/${video._id}/edit`) Edit Video

    div 
        if loggedIn
            form#commentForm
                textarea(name="comment" id="commentFormInput") 
                input(type="submit" value="댓글")
    
    div#commentContainer
        ul
            each comment in comments
                +comment_watch(comment)

            else 
                span 댓글이 없습니다


block scripts 
    script(src="/static/js/comment.js")
    script(src="/static/js/videoPlayer.js")
    script(src="/static/js/like.js")